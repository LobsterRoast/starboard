#include <gio/gio.h>

#if defined (__ELF__) && ( __GNUC__ > 2 || (__GNUC__ == 2 && __GNUC_MINOR__ >= 6))
# define SECTION __attribute__ ((section (".gresource.gresource"), aligned (sizeof(void *) > 8 ? sizeof(void *) : 8)))
#else
# define SECTION
#endif

static const SECTION union { const guint8 data[4269]; const double alignment; void * const ptr;}  gresource_resource_data = {
  "\107\126\141\162\151\141\156\164\000\000\000\000\000\000\000\000"
  "\030\000\000\000\310\000\000\000\000\000\000\050\006\000\000\000"
  "\000\000\000\000\001\000\000\000\002\000\000\000\005\000\000\000"
  "\006\000\000\000\006\000\000\000\334\265\375\275\002\000\000\000"
  "\310\000\000\000\015\000\166\000\330\000\000\000\126\016\000\000"
  "\251\176\330\121\002\000\000\000\126\016\000\000\017\000\166\000"
  "\150\016\000\000\160\020\000\000\112\256\062\056\005\000\000\000"
  "\160\020\000\000\012\000\114\000\174\020\000\000\204\020\000\000"
  "\146\233\323\321\004\000\000\000\204\020\000\000\007\000\114\000"
  "\214\020\000\000\220\020\000\000\324\265\002\000\377\377\377\377"
  "\220\020\000\000\001\000\114\000\224\020\000\000\230\020\000\000"
  "\071\245\317\132\003\000\000\000\230\020\000\000\015\000\114\000"
  "\250\020\000\000\254\020\000\000\150\145\154\160\055\151\143\157"
  "\156\056\160\156\147\000\000\000\371\015\000\000\001\000\000\000"
  "\170\332\215\126\171\124\222\351\367\177\200\220\042\025\051\367"
  "\014\025\251\254\114\061\153\162\103\044\061\175\265\022\255\111"
  "\263\024\324\334\252\151\021\367\025\163\014\132\024\303\026\371"
  "\225\212\105\223\315\144\330\067\255\134\112\112\313\306\150\060"
  "\262\064\134\162\254\121\051\115\311\135\024\277\330\374\373\373"
  "\235\363\173\316\171\316\373\336\345\363\171\357\275\357\163\357"
  "\171\316\320\166\173\351\240\115\321\000\000\035\310\233\032\000"
  "\000\014\054\356\245\132\232\307\301\270\362\250\105\211\031\340"
  "\265\035\334\375\313\114\241\021\226\104\123\166\121\000\270\307"
  "\135\076\027\206\324\310\313\116\170\357\147\002\240\333\270\270"
  "\141\315\307\313\017\151\230\362\041\052\145\157\162\350\160\167"
  "\326\235\310\237\123\136\050\247\156\172\334\364\360\105\227\373"
  "\153\357\375\307\053\334\322\322\164\307\051\347\213\260\067\026"
  "\133\042\257\173\272\347\265\020\327\274\203\135\170\277\266\342"
  "\267\007\366\267\177\156\303\006\034\131\377\335\312\261\334\063"
  "\270\132\377\215\205\100\020\205\106\300\067\304\037\116\210\061"
  "\325\332\341\056\320\066\224\265\274\315\232\044\174\162\110\072"
  "\315\224\222\322\104\325\223\363\231\274\253\141\045\011\065\111"
  "\253\035\277\326\034\031\271\077\342\206\005\377\373\022\374\244"
  "\200\311\327\304\056\160\034\155\360\272\147\071\217\113\376\211"
  "\170\310\111\216\253\343\126\114\116\261\255\302\043\246\224\043"
  "\374\031\262\172\276\325\015\055\240\360\046\025\206\263\145\335"
  "\245\235\352\024\372\102\227\211\274\052\303\222\332\164\132\122"
  "\377\216\274\354\227\062\140\152\251\050\347\070\332\343\173\364"
  "\260\166\123\312\355\231\246\330\155\107\125\057\045\252\271\225"
  "\264\155\150\101\070\157\367\220\341\374\031\354\111\026\067\160"
  "\220\035\142\222\276\306\341\370\070\245\215\015\057\077\057\154"
  "\367\154\372\375\330\233\021\305\047\235\032\053\274\055\227\343"
  "\353\060\006\231\123\127\133\263\174\274\147\347\071\216\056\370"
  "\313\252\240\117\045\371\234\127\265\370\107\257\121\376\206\110"
  "\132\221\360\035\126\371\215\343\330\325\274\143\260\237\063\355"
  "\035\225\371\016\105\323\102\322\130\102\372\160\246\134\164\206"
  "\143\244\232\306\217\162\261\312\062\111\375\053\024\321\006\315"
  "\140\360\172\114\260\131\046\130\225\252\003\037\037\026\270\004"
  "\243\002\247\051\060\155\252\354\217\272\334\254\153\334\115\161"
  "\007\352\126\114\227\143\004\131\372\356\122\002\211\214\127\343"
  "\361\352\326\346\121\137\265\023\176\337\275\125\306\206\310\126"
  "\053\150\144\330\160\041\324\355\264\323\057\137\174\172\327\232"
  "\273\223\255\131\070\157\147\107\274\332\026\237\077\141\277\363"
  "\063\211\237\122\306\056\042\241\031\057\010\305\075\233\324\037"
  "\107\355\045\257\242\067\063\253\331\105\233\320\214\323\204\212"
  "\074\016\223\324\334\366\204\307\137\227\306\371\120\006\242\334"
  "\145\141\330\223\376\324\372\226\346\112\106\251\124\362\226\324"
  "\164\164\250\037\326\357\045\063\351\116\030\261\121\147\136\133"
  "\253\130\201\261\137\245\057\206\173\317\376\301\171\104\300\047"
  "\116\331\113\332\114\170\352\027\036\066\146\154\260\207\127\145"
  "\213\357\351\163\112\115\310\214\122\237\141\027\341\220\104\077"
  "\236\056\207\263\321\252\157\253\333\151\112\075\311\101\064\252"
  "\367\266\014\364\123\144\337\071\101\355\057\137\073\275\370\062"
  "\200\125\236\225\164\015\042\212\310\177\301\166\172\313\016\324"
  "\322\243\043\225\127\252\267\340\335\206\055\177\363\200\355\024"
  "\270\274\155\370\213\251\177\177\273\214\115\152\232\073\271\164"
  "\324\246\166\243\352\356\270\331\317\101\174\076\175\122\257\360"
  "\006\110\244\310\126\131\365\035\226\372\347\225\036\352\317\306"
  "\205\307\231\301\207\250\111\136\241\206\131\335\241\362\356\000"
  "\235\075\341\050\042\012\022\161\071\242\224\374\015\363\104\007"
  "\314\230\136\141\031\070\057\264\262\012\177\074\220\367\350\176"
  "\235\315\114\017\047\371\172\135\347\137\017\310\013\111\371\017"
  "\121\151\020\325\154\005\026\265\115\375\345\105\347\346\302\302"
  "\252\075\002\320\157\241\370\204\075\131\062\140\120\173\367\100"
  "\157\351\171\216\313\346\261\330\205\137\041\050\330\024\273\316"
  "\263\251\205\343\350\204\237\034\225\336\356\070\055\071\330\157"
  "\111\334\012\145\375\076\353\152\031\133\054\334\263\146\042\261"
  "\001\006\325\371\246\326\011\353\322\341\006\151\067\310\272\014"
  "\012\241\142\062\172\277\345\024\224\132\052\174\372\161\175\371"
  "\306\123\165\031\333\015\146\177\223\256\016\042\102\033\347\371"
  "\077\011\072\327\124\174\167\272\144\241\330\343\126\203\256\116"
  "\307\041\252\171\125\135\245\261\244\316\015\012\222\033\127\106"
  "\050\376\264\262\142\147\302\302\153\342\012\136\350\373\325\071"
  "\123\303\161\220\335\367\021\372\162\110\124\030\337\340\127\273"
  "\302\114\113\100\346\225\254\213\055\044\177\215\072\024\221\244"
  "\364\237\040\254\266\120\150\145\201\113\275\104\060\177\341\042"
  "\357\330\130\164\067\074\304\277\157\311\307\355\120\355\173\163"
  "\157\244\243\266\373\002\041\144\100\132\277\276\102\051\352\106"
  "\103\015\153\024\376\131\356\271\047\215\131\141\336\263\167\310"
  "\252\376\277\121\274\120\005\375\376\126\336\356\061\324\276\354"
  "\236\273\027\100\346\031\141\265\172\350\252\170\033\201\324\336"
  "\260\357\017\102\310\040\246\262\362\106\172\276\373\161\302\343"
  "\217\245\331\165\304\226\043\357\323\034\355\376\243\027\075\073"
  "\307\012\205\234\137\225\346\062\247\213\026\322\042\054\143\371"
  "\344\216\123\357\065\332\036\050\265\220\274\362\241\203\374\171"
  "\103\236\160\371\034\305\050\356\261\124\307\370\127\141\304\334"
  "\007\153\205\203\072\045\202\240\320\313\352\315\075\072\131\003"
  "\313\271\020\037\224\344\044\042\314\347\160\271\037\340\164\023"
  "\376\315\201\231\056\326\123\357\324\154\241\147\122\243\017\324"
  "\254\362\261\071\224\053\325\161\351\073\155\121\344\004\161\251"
  "\115\156\045\230\241\066\311\301\275\165\242\330\023\173\150\343"
  "\177\007\143\320\061\337\144\137\126\130\203\361\277\351\256\326"
  "\054\170\021\100\262\334\272\076\121\140\372\342\045\213\312\120"
  "\014\132\000\326\272\303\030\375\233\307\214\014\056\002\044\021"
  "\206\006\031\037\076\077\025\133\263\226\321\300\340\253\010\234"
  "\366\371\037\250\047\256\337\236\212\057\047\263\126\373\203\101"
  "\137\305\152\261\224\044\316\327\060\170\342\264\207\040\114\245"
  "\225\006\265\076\243\331\052\021\254\024\200\326\053\031\044\143"
  "\343\177\251\302\120\255\140\321\366\030\221\374\022\061\304\201"
  "\213\045\120\360\012\054\073\325\255\322\064\323\274\054\125\037"
  "\314\126\336\071\225\266\213\366\003\307\216\324\260\255\343\327"
  "\274\363\320\170\272\233\347\217\062\030\163\343\245\172\232\220"
  "\057\146\106\343\320\214\355\372\040\352\367\072\223\001\212\046"
  "\315\072\034\343\230\106\034\176\255\201\360\071\323\265\354\242"
  "\125\110\326\376\215\041\200\056\225\334\162\155\352\262\006\222"
  "\363\302\075\370\276\155\044\163\143\362\374\100\066\134\154\123"
  "\074\260\230\267\053\015\024\055\203\156\171\065\135\320\260\114"
  "\112\346\266\141\356\061\065\104\377\160\111\326\275\170\114\345"
  "\221\233\166\355\115\113\275\123\275\250\007\373\147\304\070\211"
  "\304\050\225\023\022\201\142\041\025\075\271\123\215\045\106\142"
  "\277\205\365\225\010\361\051\357\331\203\324\153\375\051\060\125"
  "\144\077\002\027\336\336\001\143\034\346\251\005\274\347\131\330"
  "\163\131\316\103\200\150\000\241\274\232\272\261\367\330\134\235"
  "\243\107\250\146\027\371\007\322\201\064\177\065\370\055\201\202"
  "\074\107\306\367\345\330\144\062\334\171\075\267\234\217\216\326"
  "\204\145\072\056\021\327\173\073\343\361\307\306\352\013\012\067"
  "\217\005\143\354\235\164\141\104\272\121\062\355\345\300\376\071"
  "\061\213\220\361\154\252\027\171\351\311\000\250\114\366\166\156"
  "\014\144\120\314\307\147\302\234\257\041\304\367\171\361\207\250"
  "\167\246\352\013\314\043\373\055\161\341\213\052\133\110\356\200"
  "\267\125\326\133\144\316\042\074\056\214\043\077\146\031\355\235"
  "\065\312\147\075\367\220\241\322\221\206\361\154\041\135\351\024"
  "\036\346\210\142\071\101\301\046\330\205\317\051\226\015\034\116"
  "\044\177\206\144\056\176\166\102\027\270\014\336\035\023\051\036"
  "\055\354\064\044\023\365\240\207\323\352\072\101\265\033\031\220"
  "\056\304\363\105\342\123\307\106\147\140\203\147\204\344\061\203"
  "\240\326\106\136\150\037\163\111\053\002\272\065\215\266\031\072"
  "\124\152\245\031\305\251\271\302\133\232\257\214\017\270\171\001"
  "\122\101\325\025\341\210\012\155\063\350\123\152\065\333\230\000"
  "\316\135\023\332\171\122\067\165\016\117\140\225\137\044\351\057"
  "\120\255\230\273\210\240\046\102\061\375\115\337\307\025\330\343"
  "\221\112\004\242\040\376\362\310\343\345\056\075\003\113\005\050"
  "\136\376\367\167\201\035\373\177\120\215\037\271\124\074\256\342"
  "\110\261\356\176\204\214\367\232\022\004\316\314\201\161\252\054"
  "\345\011\174\271\334\102\341\344\346\245\175\356\012\314\150\031"
  "\264\021\337\267\103\272\074\245\052\255\146\044\324\134\134\231"
  "\154\162\002\133\120\225\104\075\070\224\102\071\036\241\154\317"
  "\206\007\231\251\335\360\272\343\225\005\367\153\112\311\304\202"
  "\226\314\306\221\225\077\022\034\327\242\147\043\063\076\014\260"
  "\277\073\056\163\014\350\066\231\064\247\122\165\106\004\314\044"
  "\152\375\132\207\322\121\330\305\347\116\054\145\360\201\077\373"
  "\076\312\213\307\043\224\010\217\202\052\331\324\107\344\273\357"
  "\257\166\210\247\241\331\004\150\152\146\203\315\147\327\122\163"
  "\026\016\252\355\010\014\263\314\372\312\364\310\320\160\341\171"
  "\241\006\330\217\312\172\126\032\276\157\124\062\107\066\167\017"
  "\321\150\155\107\246\004\005\314\240\305\377\133\074\224\066\272"
  "\335\355\063\323\343\261\343\022\343\145\320\303\035\115\233\245"
  "\250\104\337\050\334\260\345\227\347\226\342\245\336\301\041\117"
  "\373\270\034\307\146\104\133\036\334\230\175\137\163\130\273\044"
  "\365\157\075\000\211\067\036\105\136\152\327\353\353\146\127\225"
  "\315\004\171\205\361\114\252\315\124\272\073\067\321\156\146\376"
  "\012\106\220\151\006\337\262\123\366\165\271\235\172\060\364\173"
  "\204\162\333\131\170\114\247\051\106\153\162\130\162\160\300\122"
  "\116\201\155\361\221\035\367\152\202\064\275\160\003\047\330\244"
  "\357\136\267\173\214\301\150\217\356\337\212\273\376\103\232\140"
  "\060\006\322\130\223\064\240\303\033\227\077\333\246\172\264\326"
  "\101\064\245\067\134\006\344\173\123\125\122\277\205\013\275\316"
  "\254\027\336\232\236\346\172\065\005\230\257\172\151\344\060\246"
  "\217\171\263\066\021\014\357\367\077\241\104\105\253\233\163\341"
  "\061\122\064\106\053\336\063\352\330\250\336\360\165\040\147\336"
  "\101\041\146\037\241\142\126\015\000\123\174\154\051\047\271\151"
  "\054\273\253\204\357\225\314\171\160\017\021\343\373\147\251\232"
  "\076\016\206\157\000\171\334\171\024\242\126\216\250\342\302\143"
  "\136\251\161\332\237\017\360\147\042\060\157\064\167\240\115\067"
  "\321\275\226\030\242\256\276\373\001\037\003\161\056\216\141\226"
  "\154\040\300\362\046\207\172\142\356\377\372\070\231\051\075\031"
  "\216\152\315\017\040\317\157\373\317\164\363\071\170\214\327\155"
  "\370\164\011\312\130\063\354\126\247\045\023\013\352\134\305\311"
  "\064\060\334\321\235\223\075\307\376\127\255\041\264\307\020\161"
  "\372\356\056\227\065\016\315\244\037\016\014\024\213\257\011\343"
  "\251\056\160\360\202\125\175\062\301\150\075\323\145\064\131\263"
  "\022\135\173\237\272\077\012\216\137\174\075\072\311\260\110\113"
  "\143\051\005\100\123\114\106\277\065\153\307\241\250\333\364\077"
  "\157\202\035\347\065\121\357\301\151\263\340\306\366\232\210\061"
  "\251\104\200\146\064\071\066\166\352\101\177\220\256\302\262\164"
  "\217\056\114\235\347\134\335\314\374\224\150\002\376\037\153\155"
  "\357\161\164\366\013\310\231\210\337\315\341\030\171\065\235\173"
  "\240\012\062\305\116\165\066\047\155\036\273\252\336\012\266\120"
  "\145\366\074\165\260\254\370\177\032\232\011\041\153\024\073\041"
  "\251\122\244\043\010\340\345\027\304\127\213\006\221\035\170\305"
  "\143\165\006\330\113\225\075\345\331\116\274\163\361\040\363\252"
  "\132\032\354\130\317\010\305\026\012\113\372\075\122\215\244\201"
  "\314\332\116\250\120\032\070\263\046\170\241\375\114\030\321\002"
  "\072\222\021\251\073\330\260\246\170\220\011\047\002\050\132\165"
  "\326\246\367\026\057\364\013\323\243\363\221\256\040\216\027\272"
  "\012\333\236\026\372\362\065\177\306\005\167\075\244\056\205\225"
  "\352\055\267\303\037\166\306\046\125\011\375\322\026\033\330\166"
  "\052\043\171\115\146\373\300\331\237\116\056\245\335\376\046\121"
  "\221\112\002\373\056\113\134\345\036\125\154\017\126\152\361\127"
  "\212\347\145\337\324\102\166\014\306\205\205\116\210\356\314\032"
  "\112\211\074\366\132\142\105\242\036\350\200\265\051\364\061\033"
  "\306\175\040\257\024\316\003\032\110\160\176\237\343\123\275\331"
  "\157\150\011\222\306\377\026\030\307\035\253\017\250\220\254\164"
  "\241\300\332\006\072\116\253\033\356\024\124\265\171\124\335\270"
  "\264\116\036\056\223\137\112\254\067\353\040\242\005\156\252\124"
  "\132\215\121\062\053\221\006\046\076\064\347\264\370\003\235\033"
  "\340\313\333\140\130\175\053\242\052\007\136\356\167\004\051\326"
  "\025\204\351\273\147\114\116\012\342\244\123\140\130\000\276\214"
  "\125\242\056\245\211\177\330\245\126\270\275\307\356\243\142\120"
  "\110\132\151\151\012\315\051\361\007\276\121\027\344\224\151\374"
  "\112\065\306\302\177\215\253\110\345\035\126\374\232\036\217\105"
  "\324\316\250\036\103\354\001\127\121\233\316\217\246\052\016\376"
  "\200\244\201\074\015\260\255\345\331\341\233\345\225\053\273\126"
  "\126\006\360\276\161\071\363\256\242\227\227\370\063\373\060\157"
  "\014\023\301\104\255\070\247\345\332\010\114\336\250\053\010\350"
  "\256\170\372\123\340\354\053\312\225\250\376\015\230\067\270\104"
  "\160\251\105\162\313\252\257\120\123\276\010\034\030\314\026\212"
  "\146\125\161\006\223\266\232\241\133\342\055\367\223\105\321\163"
  "\163\017\176\036\103\264\072\100\353\246\175\154\172\351\031\241"
  "\100\013\037\233\047\172\011\313\240\313\312\334\326\001\004\057"
  "\376\167\221\004\226\276\053\040\117\104\005\347\270\302\117\204"
  "\171\111\140\254\237\355\304\010\106\100\204\330\276\265\055\201"
  "\137\265\177\271\034\237\237\105\007\006\027\342\317\013\277\246"
  "\117\330\212\367\101\346\005\125\115\015\106\054\037\310\031\222"
  "\075\347\075\230\076\133\322\272\213\247\346\104\314\077\147\373"
  "\146\173\355\220\051\261\312\064\354\275\054\252\153\122\035\227"
  "\124\353\242\173\134\225\154\215\177\142\200\155\077\324\237\243"
  "\116\370\077\316\263\347\074\131\313\277\151\300\156\327\174\313"
  "\242\010\171\356\246\336\335\316\070\365\137\275\246\126\144\000"
  "\050\165\165\141\171\051\147\151\164\150\165\142\055\154\157\147"
  "\157\056\163\166\147\000\000\000\300\003\000\000\001\000\000\000"
  "\170\332\135\123\331\156\033\061\014\374\025\142\373\274\264\170"
  "\350\052\342\274\344\271\037\021\370\210\015\270\211\221\270\161"
  "\321\257\357\160\167\135\324\301\002\213\021\051\215\070\103\352"
  "\341\343\363\205\256\307\355\345\260\036\172\033\350\260\073\276"
  "\034\056\300\145\240\337\077\117\257\037\353\341\160\271\234\277"
  "\257\126\327\353\225\257\306\157\357\057\053\115\051\255\160\160"
  "\170\174\070\077\137\016\264\077\236\116\343\373\257\323\156\075"
  "\354\076\167\257\157\333\355\100\233\323\361\374\065\266\135\017"
  "\077\274\161\313\116\351\111\205\233\165\112\370\124\361\363\316"
  "\052\165\203\225\160\315\205\304\270\167\043\117\054\125\311\214"
  "\075\145\362\302\245\223\262\153\145\357\144\154\122\106\341\224"
  "\157\130\331\012\330\020\023\227\221\123\033\063\262\072\241\316"
  "\242\165\004\157\016\212\156\076\112\001\023\166\264\122\357\260"
  "\262\064\007\256\051\376\010\127\024\361\037\162\166\157\243\161"
  "\222\314\246\376\025\221\007\073\326\205\052\147\065\232\152\270"
  "\303\310\226\112\041\002\112\005\332\034\011\253\215\304\131\055"
  "\030\122\365\010\203\121\042\014\335\175\234\267\130\344\106\070"
  "\061\112\012\017\027\261\252\254\156\363\236\333\102\301\326\014"
  "\176\054\344\334\035\066\124\100\224\041\036\146\300\033\157\031"
  "\034\252\272\010\057\254\025\142\133\211\174\262\066\065\311\341"
  "\136\154\063\224\212\260\103\334\044\345\031\075\351\225\346\177"
  "\154\024\022\134\036\344\134\154\063\035\103\264\061\132\230\353"
  "\222\264\020\144\324\301\246\270\316\346\176\243\253\163\273\356"
  "\027\312\260\252\160\055\026\127\300\255\026\275\152\231\226\352"
  "\340\120\316\024\047\164\222\225\341\153\373\207\103\142\124\325"
  "\270\047\324\077\173\255\070\131\302\044\364\214\026\223\060\166"
  "\341\120\366\066\317\022\024\173\223\005\307\354\024\320\204\353"
  "\230\245\251\212\136\147\010\135\123\156\362\006\141\024\334\262"
  "\055\007\143\040\141\130\147\227\120\232\157\243\034\255\351\150"
  "\364\262\232\006\133\236\172\305\314\325\170\020\150\100\155\341"
  "\374\355\301\374\031\246\167\266\036\276\355\367\373\141\365\370"
  "\020\057\360\361\057\115\164\310\134\000\050\165\165\141\171\051"
  "\163\164\141\162\142\157\141\162\144\057\000\000\001\000\000\000"
  "\000\000\000\000\147\151\164\150\165\142\057\000\005\000\000\000"
  "\057\000\000\000\003\000\000\000\154\157\142\163\164\145\162\162"
  "\157\141\163\164\057\000\000\000\002\000\000\000" };

static GStaticResource static_resource = { gresource_resource_data.data, sizeof (gresource_resource_data.data) - 1 /* nul terminator */, NULL, NULL, NULL };

G_MODULE_EXPORT
GResource *gresource_get_resource (void);
GResource *gresource_get_resource (void)
{
  return g_static_resource_get_resource (&static_resource);
}
/* GLIB - Library of useful routines for C programming
 * Copyright (C) 1995-1997  Peter Mattis, Spencer Kimball and Josh MacDonald
 *
 * SPDX-License-Identifier: LGPL-2.1-or-later
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2.1 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.	 See the GNU
 * Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, see <http://www.gnu.org/licenses/>.
 */

/*
 * Modified by the GLib Team and others 1997-2000.  See the AUTHORS
 * file for a list of people on the GLib Team.  See the ChangeLog
 * files for a list of changes.  These files are distributed with
 * GLib at ftp://ftp.gtk.org/pub/gtk/.
 */

#ifndef __G_CONSTRUCTOR_H__
#define __G_CONSTRUCTOR_H__

/*
  If G_HAS_CONSTRUCTORS is true then the compiler support *both* constructors and
  destructors, in a usable way, including e.g. on library unload. If not you're on
  your own.

  Some compilers need #pragma to handle this, which does not work with macros,
  so the way you need to use this is (for constructors):

  #ifdef G_DEFINE_CONSTRUCTOR_NEEDS_PRAGMA
  #pragma G_DEFINE_CONSTRUCTOR_PRAGMA_ARGS(my_constructor)
  #endif
  G_DEFINE_CONSTRUCTOR(my_constructor)
  static void my_constructor(void) {
   ...
  }

*/

#ifndef __GTK_DOC_IGNORE__

#if  __GNUC__ > 2 || (__GNUC__ == 2 && __GNUC_MINOR__ >= 7)

#define G_HAS_CONSTRUCTORS 1

#define G_DEFINE_CONSTRUCTOR(_func) static void __attribute__((constructor)) _func (void);
#define G_DEFINE_DESTRUCTOR(_func) static void __attribute__((destructor)) _func (void);

#elif defined (_MSC_VER)

/*
 * Only try to include gslist.h if not already included via glib.h,
 * so that items using gconstructor.h outside of GLib (such as
 * GResources) continue to build properly.
 */
#ifndef __G_LIB_H__
#include "gslist.h"
#endif

#include <stdlib.h>

#define G_HAS_CONSTRUCTORS 1

/* We do some weird things to avoid the constructors being optimized
 * away on VS2015 if WholeProgramOptimization is enabled. First we
 * make a reference to the array from the wrapper to make sure its
 * references. Then we use a pragma to make sure the wrapper function
 * symbol is always included at the link stage. Also, the symbols
 * need to be extern (but not dllexport), even though they are not
 * really used from another object file.
 */

/* We need to account for differences between the mangling of symbols
 * for x86 and x64/ARM/ARM64 programs, as symbols on x86 are prefixed
 * with an underscore but symbols on x64/ARM/ARM64 are not.
 */
#ifdef _M_IX86
#define G_MSVC_SYMBOL_PREFIX "_"
#else
#define G_MSVC_SYMBOL_PREFIX ""
#endif

#define G_DEFINE_CONSTRUCTOR(_func) G_MSVC_CTOR (_func, G_MSVC_SYMBOL_PREFIX)
#define G_DEFINE_DESTRUCTOR(_func) G_MSVC_DTOR (_func, G_MSVC_SYMBOL_PREFIX)

#define G_MSVC_CTOR(_func,_sym_prefix) \
  static void _func(void); \
  extern int (* _array ## _func)(void);              \
  int _func ## _wrapper(void);              \
  int _func ## _wrapper(void) { _func(); g_slist_find (NULL,  _array ## _func); return 0; } \
  __pragma(comment(linker,"/include:" _sym_prefix # _func "_wrapper")) \
  __pragma(section(".CRT$XCU",read)) \
  __declspec(allocate(".CRT$XCU")) int (* _array ## _func)(void) = _func ## _wrapper;

#define G_MSVC_DTOR(_func,_sym_prefix) \
  static void _func(void); \
  extern int (* _array ## _func)(void);              \
  int _func ## _constructor(void);              \
  int _func ## _constructor(void) { atexit (_func); g_slist_find (NULL,  _array ## _func); return 0; } \
   __pragma(comment(linker,"/include:" _sym_prefix # _func "_constructor")) \
  __pragma(section(".CRT$XCU",read)) \
  __declspec(allocate(".CRT$XCU")) int (* _array ## _func)(void) = _func ## _constructor;

#elif defined(__SUNPRO_C)

/* This is not tested, but i believe it should work, based on:
 * http://opensource.apple.com/source/OpenSSL098/OpenSSL098-35/src/fips/fips_premain.c
 */

#define G_HAS_CONSTRUCTORS 1

#define G_DEFINE_CONSTRUCTOR_NEEDS_PRAGMA 1
#define G_DEFINE_DESTRUCTOR_NEEDS_PRAGMA 1

#define G_DEFINE_CONSTRUCTOR_PRAGMA_ARGS(_func) \
  init(_func)
#define G_DEFINE_CONSTRUCTOR(_func) \
  static void _func(void);

#define G_DEFINE_DESTRUCTOR_PRAGMA_ARGS(_func) \
  fini(_func)
#define G_DEFINE_DESTRUCTOR(_func) \
  static void _func(void);

#else

/* constructors not supported for this compiler */

#endif

#endif /* __GTK_DOC_IGNORE__ */
#endif /* __G_CONSTRUCTOR_H__ */

#ifdef G_HAS_CONSTRUCTORS

#ifdef G_DEFINE_CONSTRUCTOR_NEEDS_PRAGMA
#pragma G_DEFINE_CONSTRUCTOR_PRAGMA_ARGS(gresourceresource_constructor)
#endif
G_DEFINE_CONSTRUCTOR(gresourceresource_constructor)
#ifdef G_DEFINE_DESTRUCTOR_NEEDS_PRAGMA
#pragma G_DEFINE_DESTRUCTOR_PRAGMA_ARGS(gresourceresource_destructor)
#endif
G_DEFINE_DESTRUCTOR(gresourceresource_destructor)

#else
#warning "Constructor not supported on this compiler, linking in resources will not work"
#endif

static void gresourceresource_constructor (void)
{
  g_static_resource_init (&static_resource);
}

static void gresourceresource_destructor (void)
{
  g_static_resource_fini (&static_resource);
}
